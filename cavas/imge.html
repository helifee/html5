<!DOCTYPE HTML>
<html>
<head>
<title>Image Demo</title>
<script type="text/javascript">
window.onload = function() {
	var canvas1 = document.getElementById("canvas1");
	var cxt = canvas1.getContext("2d");
	preImage("../resource/ct_html5_canvas_image.png",function(){  
        cxt.drawImage(this,0,0);  
    });
}

function preImage(url,callback){  
     var img = new Image(); //创建一个Image对象，实现图片的预下载  
     img.src = url;  
     
    if (img.complete) { // 如果图片已经存在于浏览器缓存，直接调用回调函数  
         callback.call(img);  
        return; // 直接返回，不用再处理onload事件  
     }  
  
     img.onload = function () { //图片下载完毕时异步调用callback函数。  
         callback.call(img);//将回调函数的this替换为Image对象  
     };  
}  
</script>
</head>
<body>

<canvas id="canvas1" width="200", height="100" style="border:1px solid #c3c3c3"></canvas>
</body>
</html>